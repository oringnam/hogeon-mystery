# 변경 이력 (Changelog)

## v4.7 (2026-02-15) - 🧼 **상단 진행도 표시 제거**

### 변경
- 상단의 `📊 조사 n단계 | 🔍 단서 n/9개` 진행도 표시를 UI에서 제거 (몰입감/깔끔함 우선)
  - 단서 노트(📋 단서 버튼)는 그대로 유지

### 기술
- Service Worker 캐시 버전 bump (v48)

---

## v4.6 (2026-02-15) - 🎨 **프롤로그 일러스트 추가**

### 추가
- 프롤로그 장면용 픽셀아트 일러스트 `prologue.png` 제작/교체
  - 카페 테이블에 모인 친구들 + 비어있는 자리(호건의 부재) + 돋보기 모티프

### 기술
- Service Worker 캐시 버전 bump (v47)

---

## v4.5 (2026-02-14) - 🖼️ **모바일에서 이미지가 안 뜨는 버그 수정**

### 수정
- 타이핑 효과 중 화면을 탭해서 스킵할 때, `IMAGE:` 태그로 예약된 이미지가 렌더링되지 않는 버그 수정
  - (텍스트만 나오고 일러가 아예 안 보이던 케이스)
- SW 캐시 버전 1회 추가 bump (v46)

---

## v4.4 (2026-02-14) - 🧹 **모바일 캐시/이미지 표시 안정화**

### 수정
- Service Worker 업데이트 안정화
  - `skipWaiting()` + `clients.claim()` 추가
  - 이전 캐시 자동 삭제(activate 단계)
  - HTML / story.json은 **network-first**로 가져오도록 개선
  - 불안정 네트워크에서 특정 파일 실패로 SW install이 깨지지 않게 `Promise.allSettled` 적용
- story.json 캐시 우회 버전 파라미터 갱신
  - `story.json?v=3.25` → `story.json?v=4.4`
- 이미지 로딩 UX 개선
  - 로딩 중에도 이미지 영역(1:1) 공간 확보
  - 실패 시 placeholder 표시 로직 단순화

---

## v4.3 (2026-02-14) - 🐛 **버그 수정 및 전체 검수**

### 수정 (Critical Bug Fix)
- **디지털 경로 진행 막힘 버그 수정**
  - 마크다운 볼드(**) 문법이 선택지처럼 렌더링되는 버그
  - `**2017년 1월 15일**` → `2017년 1월 15일:` 형식으로 변경
  - 모든 3단계 분기점에 명확한 질문 추가 ("어디부터 볼까?" 등)
  
- **텍스트 가독성 개선**
  - 날짜/제목 표시 방식 통일
  - 인용구(>) 마크다운 제거 (일부 브라우저 렌더링 문제)
  - 선택지 직전에 문맥 추가

### 영향받은 파일
- `paths/digital_path.ink` (5곳 수정)
  - digital_stage3_facebook
  - digital_stage3_insta_blog
  - digital_stage3_community
  - digital_stage3_other_posts
  - digital_stage4_lotto (2곳)

### 검수 완료
- ✅ 디지털 경로 전체 플레이 테스트
- ✅ 가족 경로 검수
- ✅ 기록 경로 검수
- ✅ 엔딩 9개 전부 도달 가능 확인

## v4.1 (2026-02-14) - ✨ **엔딩 톤 조정 (긍정적)**

### 변경 (사용자 요청 반영)
- **교도소 엔딩 → 해외 사랑 도피 엔딩**
  - 범죄 내용 완전 제거
  - 호주 워킹홀리데이 → 사랑 → 결혼 → 카페
  - 아내 미나(일본), 아기 임신
  - 한국 지점 오픈 (강남)
  
- **혼수 엔딩 톤 조정**
  - 가족 고통 묘사 제거
  - "어머니 허락" → "병원 허가"로 변경
  - 친구들의 헌신과 기적에 초점
  
- **판타지 엔딩 → 코믹 이세계 용사 귀환**
  - 비극적 실종 제거
  - 진짜 이세계 갔다 온 용사로 설정
  - 미스릴 갑옷, 성검, 보물
  - "이세계 용사 카페" 오픈 (강남)
  - 코믹하고 밝은 분위기

### 개선
- 모든 엔딩이 긍정적/희망적으로 변경
- 실존 인물(호건, 가족) 부정적 묘사 제거
- 코믹 요소 강화 (판타지)

## v4.0 (2026-02-14) - 🎮 **5단계 분기형 구조 대개편**

### 변경 (Breaking Changes)
- **완전히 새로운 게임 구조**
- 허브 시스템 제거 → 독립 분기형으로 전환
- 선택지 과다 문제 해결 (5~6개 → 최대 3개)

### 추가 (5-Stage Branching System)
- **3개 독립 경로** 추가
  - **경로 1: 디지털 흔적** (SNS/온라인)
  - **경로 2: 인적 네트워크** (가족/지인)
  - **경로 3: 공식 기록** (대학/공공)
  
- **각 경로별 5단계 진행**
  1. 조사 방향 선택 (3개)
  2. 세부 방법 선택 (3개)
  3. 특정 단서 발견 (2-3개)
  4. 심화 분석 (2개)
  5. 최종 확인 (1-2개)
  → 엔딩 (9개 중 1개)

- **새 파일 구조**
  - `paths/digital_path.ink` (디지털 경로 전체)
  - `paths/family_path.ink` (가족 경로 전체)
  - `paths/records_path.ink` (기록 경로 전체)

### 제거
- `core/investigation_hub.ink` (허브 시스템)
- `branches/` 하위 개별 파일들 (통합됨)
- `branches/deeper/` (심화 조사 분리 제거)

### 개선
- **몰입감 향상**: 선택지 3개 이하 유지
- **스토리 흐름**: 한 경로로 집중, 허브 왕복 제거
- **플레이 시간**: 20-30분 (적절한 길이)
- **리플레이 가치**: 3개 경로 × 5단계 = 다양한 조합

### 엔딩 그룹핑
- **디지털 경로** → 로또 / 판타지 / 스파이
- **가족 경로** → 선박 / 혼수 / 목격자
- **기록 경로** → 종교 / 사업 / 교도소

### 기술
- 기존 콘텐츠 80% 재활용
- 새 텍스트 약 4,000단어 추가
- Ink 코드 전면 재구조화

## v3.36 (2026-02-14)
### 추가 (프롤로그, 조사, 전체 톤 강화)
- **프롤로그 대폭 확장**
  - 친구들 10명 캐릭터 디테일 추가 (직업, 성격, 말투)
  - 카페 모임 분위기 생생하게 묘사
  - 9년 공백의 무게감 강화
  - 조사 시작 결의 장면 확장
- **조사 과정 몰입감 강화**
  - SNS 조사: 마지막 게시물 발견 장면 극적으로
  - 가족 연락: 어머니와의 통화 장면 감동적으로
  - 분석 단계: 단서 정리 회의 디테일 추가
  - 친구들의 반응과 감정선 추가
- **에필로그 재작성**
  - 19년 우정 스토리 요약
  - 카톡방 대화 장면 추가
  - 마지막 단체 사진 장면
  - 플레이어에게 던지는 메시지 추가
  - "당신의 친구는 안녕하신가요?"

## v3.35 (2026-02-14)
### 추가 (스토리 강화)
- 모든 엔딩 텍스트 대폭 확장 (50-100단어 → 300-500단어)
- **로또 엔딩**: 돈과 우정의 갈등, 구체적 에피소드 추가
- **선박 엔딩**: 바다의 디테일, 9년 고생 묘사 강화
- **판타지 엔딩**: 신비롭고 슬픈 분위기, 노트 내용 확장
- **목격자 엔딩**: 증인보호 프로그램 긴장감, 9년 숨어 지낸 무게
- **스파이 엔딩**: 국정원 요원의 고독, 아쉬운 이별
- **종교 엔딩**: 출가 배경, 평화로운 깨달음의 여정
- **교도소 엔딩**: 사기죄 반성, 피해자 편지, 재회의 감동
- **사업 엔딩**: 제주도 재기, 5년 18시간 노동, 희망의 메시지
- **혼수 엔딩**: 10년 기다림, 기적의 깨어남
- 각 엔딩마다 감정선 디테일 추가, 구체적 에피소드 강화
- 엔딩 메시지도 더 깊이 있게 재작성

## v3.34 (2026-02-14)
### 수정 (버그 픽스)
- 가족 분기에서 단서 플래그 과다 설정 버그 수정
- family_money 분기에서 clue_ship, clue_business 플래그 제거
- 이제 각 조사 분기를 직접 탐색해야만 해당 단서 획득 가능
- "조사 안 했는데 했다고 나오는" 현상 해결

## v3.33 (2026-02-14)
### 수정
- 엔딩 이미지 스포일러 방지 (타이핑 완료 후 이미지 표시)
- 엔딩 후 선택지 정리 (엔딩 감지 시 "엔딩 보기"만 표시)
- 타이핑 속도 증가 (35ms → 25ms)

## v3.32 (2026-02-14)
### 변경
- 기본 BGM을 Sneaky Snitch로 변경 (코믹 탐정 분위기)

## v3.31 (2026-02-14)
### 개선
- 변경 이력 모달 크기 축소 (700px→550px, 85vh→75vh)
- 뒤로가기 버튼으로 모달 닫기 (History API)
- 모달 외부 클릭으로 닫기 (기존 기능 유지)

## v3.30 (2026-02-14)
### 수정
- 변경 이력 닫기 버튼 제대로 작동하도록 수정 (addEventListener)
- 변경 이력 헤더 불투명 효과 (backdrop-filter blur)

## v3.29 (2026-02-14)
### 개선
- 게임 특징 5개 → 4개로 축소 (2×2 그리드로 깔끔하게 정렬)
- BGM 3곡 특징 제거
- 제목, 서브타이틀, 아이콘, 설명 텍스트 선택 방지

## v3.28 (2026-02-14)
### 수정
- 게임 특징 태그 텍스트 선택 방지 (user-select: none)

## v3.27 (2026-02-14)
### 개선
- 변경 이력 모달 더 컴팩트하게 (폰트 크기 축소, 간격 축소)
- 게임 특징 2열 그리드로 변경 (호버 효과 제거)
- 전체 레이아웃 높이 축소 (스크롤 최소화)
- 모바일 최적화 강화

## v3.26 (2026-02-14)
### 개선
- 메인 화면 완전 리디자인 (모던 UX)
- 배경 그라데이션 및 패턴 개선
- 특징 태그를 그리드 레이아웃으로 변경
- 게임 시작 버튼 크기/스타일 개선 (ripple 효과)
- Footer 간소화 (버전 정보만 표시)
- 글래스모피즘 스타일 버전 배지
- 부드러운 애니메이션 추가

## v3.25 (2026-02-14)
### 수정
- BGM 선택 UI를 우측 하단 스피커 버튼으로 이동
- 헤더 버튼 겹침 현상 해결
- 닫기 버튼 작동 수정

## v3.24 (2026-02-14)
### 추가
- BGM 3곡 선택 기능 (Dark Fog, Investigations, Sneaky Snitch)
- 헤더 클릭 시 메인 페이지 이동
### 제거
- 서브타이틀 및 버전 정보 (헤더 간소화)

## v3.23 (2026-02-14)
### 수정
- BGM 캐시 문제 해결 (파일명 변경)

## v3.21-22 (2026-02-14)
### 추가
- 배경음악 시스템 (Dark Fog - 어두운 미스터리)
- 단일 BGM 루프 재생
### 변경
- 타이핑 속도 조정 (50ms → 35ms)

## v3.19-20 (2026-02-14)
### 추가
- 비주얼 노벨 스타일 타이핑 효과
- 화면 클릭으로 타이핑 스킵
- 타이핑 효과 토글 버튼
### 수정
- 타이핑 커서 중복 표시 문제 해결
- 스크롤 최적화 (타이핑 완료 후 1회만)

## v3.18 (2026-02-14)
### 추가
- 배경음악 시스템 (Kevin MacLeod 음원 4곡)
- 음소거 토글 버튼
- Service Worker 음원 캐싱

## v3.16-17 (2026-02-14)
### 수정
- 호건 성 수정 (박호건 → 김호건)
- 인원 정보 명시 (총 10명, 재회=10명)

## v3.9-15 (2026-02-13~14)
### 추가
- 엔딩 공유 기능 (Web Share API + 클립보드)
- 단서 노트북 시스템
### 개선
- 모바일 클립보드 폴백
- 공유 모달 UX 개선

## v3.2-8 (2026-02-13)
### 추가
- 9가지 엔딩 (로또, 선박, 혼수상태, 증인보호, 이세계, 스파이, 승려, 사업실패, 감옥)
- 자동 추론 시스템
- 조사 경로 다양화
### 수정
- 가족 스토리 변경 (건강 문제 → 경제적 압박)
- 선택지 텍스트 개선

## v3.0-1 (2026-02-12~13)
### 초기 릴리스
- 42파일 모듈 구조
- Ink/inkjs 기반 인터랙티브 스토리
- 모바일 최적화 UI
- GitHub Pages 배포
